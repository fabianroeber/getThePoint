<ui:composition template="../template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<ui:define name="content">
		<h:form>

			<p:dataTable rowIndexVar="frageRow" id="fragen" var="frage"
				value="#{frageBean.fragen}">
				<p:column headerText="Frage">
					<p:inplace id="ajax" editor="true">
						<p:inputText value="#{frage.text}" />
					</p:inplace>
				</p:column>
				<p:column headerText="Antwortmöglichkeiten">
					<p:dataTable id="antwortmoeg" rowIndexVar="antwortRow"
						value="#{frage.antwortmoeglichkeiten}" var="antwort"
						styleClass="hide-column-names" selection="#{frage.loesung}"
						selectionMode="single" type="ordered" rowKey="#{antwort.id}"
						rendered="#{frage.antwortmoeglichkeiten.size() > 0}">
						<p:column>
							<p:inplace id="antwortbearbeiten" editor="true" event="dblclick">
								<p:inputText value="#{antwort.text}"></p:inputText>
							</p:inplace>
							<p:tooltip id="tooltipAntwort" for="antwortbearbeiten"
								value="Doppelklick, um Antwortmöglichkeit zu bearbeiten" />
						</p:column>
						<p:column>
							<p:commandButton icon="ui-icon-circle-minus"
								action="#{frageBean.deleteAntwortmoeg(frageRow, antwortRow)}"></p:commandButton>
						</p:column>
					</p:dataTable>
					<p:commandButton icon="ui-icon-plus"
						action="#{frageBean.addAntwortmoeg(frageRow)}"
						update="antwortmoeg" rendered="#{!frage.hasMaxAntworten()}" />

					<!-- <p:outputLabel for="selectloesung" value="Lösung: " />
					<p:selectOneButton id="selectloesung" value="#{frage.loesung}"
						required="false" converter="omnifaces.SelectItemsConverter">
						<f:selectItems value="#{frage.antwortmoeglichkeiten}" var="antw"
							itemValue="#{antw}"
							itemLabel="#{frage.antwortmoeglichkeiten.indexOf(antw)+1}"></f:selectItems>
					</p:selectOneButton> -->

				</p:column>
				<p:column headerText="Kategorie">
					<p:selectOneMenu value="#{frage.kategorie}"
						converter="omnifaces.SelectItemsConverter">
						<f:selectItems value="#{frageBean.kategorien}" var="kateg"
							itemValue="#{kateg}" itemLabel="#{kateg.bezeichnung}"></f:selectItems>
					</p:selectOneMenu>
				</p:column>

				<p:column headerText="Bild">
					<p:graphicImage value="#{frage.bild}"></p:graphicImage>
				</p:column>
				<p:column headerText="Schwierigkeit">
					<p:outputLabel value="#{frage.schwierigkeit.text}"></p:outputLabel>
				</p:column>
			</p:dataTable>
			<br></br>
			<p:commandButton value="Neue Frage hinzufügen"
				action="#{frageBean.addFrage()}" update="fragen"></p:commandButton>
			<br></br>
			<br></br>
			<p:commandButton value="Speichern" id="save" update="fragen"
				icon="ui-icon-disk" />
			<p:button value="Abbrechen"></p:button>
		</h:form>
	</ui:define>
	<ui:define name="pagefooter">

	</ui:define>
</ui:composition>