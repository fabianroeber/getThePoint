<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<ui:define name="content">
		<h:form>

			<br></br>
			<br></br>

			<p:dataTable id="wissenstests" var="wissenstest"
				selectionMode="single"
				selection="#{auswertungenBean.selectedWissenstest}"
				value="#{auswertungenBean.wissenstests}" rowKey="#{wissenstest.id}">
				<f:facet name="header">Auswahl des Wissenstests</f:facet>
				<p:column headerText="Bezeichnung"
					selection="#{auswertungenBean.selectedWissenstest}"
					style="text-align:left">
					<p:outputLabel value="#{wissenstest.bezeichnung}" />
				</p:column>
				<p:column headerText="Beginn">
					<p:outputLabel value="#{wissenstest.startzeit}">
						<f:convertDateTime pattern="dd.MM.yyyy hh:mm:ss" />
					</p:outputLabel>
				</p:column>
				<p:column headerText="Ende">
					<p:outputLabel value="#{wissenstest.endzeit}">
						<f:convertDateTime pattern="dd.MM.yyyy hh:mm:ss" />
					</p:outputLabel>
				</p:column>
				<f:facet name="footer">
					<h:commandLink
						action="#{auswertungenBean.createAuswertungStudenten()}"
						title="Excel Export des kompletten Wissenstest">
						<h:graphicImage value="resources/images/Excel_15.png"
							height="25px" width="25px"></h:graphicImage>
					</h:commandLink>
					<p:commandLink onclick="PF('dlg').show();" title="Statistik">
						<h:graphicImage value="resources/images/analytics.png"
							height="25px" width="25px"></h:graphicImage>
					</p:commandLink>

				</f:facet>
			</p:dataTable>
			<p:dialog header="Auswertung nach Fragen" widgetVar="dlg"
				height="700px" width="1000px">
				<p:chart type="bar" model="#{auswertungenBean.barModel}"
					style="height:500px; width:800px" />
			</p:dialog>


			<p:dataTable value="#{auswertungenBean.auswertungsErgebnis}"
				rowIndexVar="row">
				<p:column headerText="%"
					styleClass="#{auswertungenBean.isOverPerc(row) == true ? 'styleGreen' : 'stylered'}"></p:column>
			</p:dataTable>

		</h:form>
	</ui:define>
	<ui:define name="pagefooter">

	</ui:define>
</ui:composition>