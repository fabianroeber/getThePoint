<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<ui:define name="content">
		<h:form>

			<br></br>
			<br></br>

			<p:dataTable id="wissenstests" var="wissenstest"
				selectionMode="single"
				selection="#{auswertungenBean.selectedWissenstest}"
				value="#{auswertungenBean.wissenstests}" rowKey="#{wissenstest.id}">
				<f:facet name="header">Auswahl des Wissenstests</f:facet>
				<p:column headerText="Bezeichnung"
					selection="#{auswertungenBean.selectedWissenstest}"
					style="text-align:left">
					<p:outputLabel value="#{wissenstest.bezeichnung}" />
				</p:column>
				<p:column headerText="Beginn">
					<p:outputLabel value="#{wissenstest.startzeit}">
						<f:convertDateTime pattern="dd.MM.yyyy hh:mm:ss" />
					</p:outputLabel>
				</p:column>
				<p:column headerText="Ende">
					<p:outputLabel value="#{wissenstest.endzeit}">
						<f:convertDateTime pattern="dd.MM.yyyy hh:mm:ss" />
					</p:outputLabel>
				</p:column>
				<f:facet name="footer">
					<h:commandLink
						action="#{auswertungenBean.createAuswertungStudenten()}"
						title="Excel Export des kompletten Wissenstest">
						<h:graphicImage value="resources/images/Excel_15.png" height="25"
							width="25"></h:graphicImage>
					</h:commandLink>
					<p:commandLink oncomplete="PF('dlg').show();"
						update=":myOutputPanel"
						action="#{auswertungenBean.createBarModels()}" ajax="true"
						title="Statistik">
						<h:graphicImage value="resources/images/analytics.png" height="25"
							width="25"></h:graphicImage>
					</p:commandLink>

				</f:facet>
			</p:dataTable>



			<p:dataTable value="#{auswertungenBean.auswertungsErgebnis}"
				rowIndexVar="row" id="auswertungsErgebnis" var="auswerg">
				<p:column headerText="Name" value="#{auswerg.studentname}"></p:column>
				<p:column headerText="Matrikel-Nr." value="#{auswerg.matrikelnr}"></p:column>
				<p:column headerText="%" value="#{auswerg.richtigInProzent}"></p:column>
			</p:dataTable>

		</h:form>


		<p:dialog id="myDialog" header="Auswertung nach Fragen"
			widgetVar="dlg" height="700px" width="1000px">
			<p:outputPanel id="myOutputPanel">
				<p:chart type="bar" model="#{auswertungenBean.barModel}"
					style="height:500px; width:800px" />
			</p:outputPanel>
		</p:dialog>


	</ui:define>
	<ui:define name="pagefooter">

	</ui:define>
</ui:composition>